/*! node_app_gen 08-11-2018 */

!function(){"use strict";angular.module("app",["ngMaterial","ngMdIcons","ui.router","ngResource"]).config(["$stateProvider",function(t){t.state({name:"app",url:"/",views:{menue:{templateUrl:"home/menu_template.ejs"}}}).state("report",{views:{menue:{templateUrl:"home/menu_template.ejs"}}}),t.state({name:"menu",url:"/meun",templateUrl:"home/menu.ejs"}),t.state({name:"home",url:"/home",templateUrl:"home/home.ejs"}),t.state({name:"menu2",url:"/meun2",templateUrl:"home/menu2.ejs"})}])}(),function(){"use strict";angular.module("app").controller("MainController",["$scope","RugSession","ObjectUtils","$http","$state","$log","$mdSidenav","$mdMedia","toastService","_","$mdToast",function(t,e,i,o,n,s,l,r,a,c,u){e.isAuthenticated()||e.logout(),n.go("auth"),t.$on("speedDial",function(t,e,i){t=t||null,i=i||null,d="EditOrUpdate"!==e&&"disable"!==e}),t.$on("stateStatus",function(e,i,o){t.stateStatusActive="busy"!==i,t.stateStatusMessage=o});var m=!1,d=!1;t.stateStatusActive=!0,t.backbroundColor="default-primary-900",t.companyName="",e.isAuthenticated()&&(!0,d=!0),t.isThemeActive=function(){return!!e.isAuthenticated()&&!0},t.isShortSideBarActive=function(){return!!e.isAuthenticated()&&m},t.isSpeedDialActive=function(){return d},t.toggleLeftSideBar=function(){if(r("gt-sm")){var t=document.getElementById("left-side-bar");t.classList.contains("md-locked-open")?(t.classList.remove("md-locked-open"),m=!0):(t.classList.add("md-locked-open"),m=!1)}else l("left").toggle()},t.login=function(){window.location="/"+t.companyName+"/#/"},t.$watch(function(){return r("gt-sm")},function(t){m=!1}),t.closeSideNav=function(){l("left").close().then(function(){s.debug("close RIGHT is done")})},t.closeSideNav=function(){l("left").close().then(function(){s.debug("close RIGHT is done")})},t.gotoState=function(e){if(t.stateStatusActive)n.go(e);else{var i=u.simple().textContent(t.stateStatusMessage+"Click to change state").action("forcefully").highlightAction(!0).highlightClass("md-accent").position("bottom right");u.show(i).then(function(i){console.log(i),"ok"==i?(t.stateStatusActive=!0,n.go(e)):a.serverError(t.stateStatusMessage)})}!r("gt-sm")&&l("left").isOpen()&&l("left").toggle()},t.logoutCall=function(){!1,e.setAuthenticated(!1),o.get("api/logout").then(function(t){t&&n.go("auth")})},t.getUsernameFromJson=function(){var t=e.getUser();return t.first_name+" "+t.last_name},t.loadStaff=function(){var i=e.getUser();t.result=t.parseStaff(i),i.name=i.first_name+" "+i.last_name,n.go("staff-edit",{staffId:i._id,staff:i})},t.parseStaff=function(t){var e=t;if(i.isObject(t))for(var o in t)"date_of_birth"==o?i.isNonEmptyString(t.date_of_birth)&&(e.date_of_birth=new Date(t.date_of_birth)):e[o]=t[o];return e},t.openSettings=function(){var t=e.getUser();if(i.isObject(t)&&i.isObject(t.portal)){var o=t.portal;o.payroll&&o.payroll.current_period_start&&i.isNonEmptyString(o.payroll.current_period_start)&&(o.payroll.current_period_start=new Date(o.payroll.current_period_start)),n.go("portal-settings",{portal:o})}},t.quickFabMenu=[{label:"Add a new order",tooltip:"New Order",icon:"border_all",link:"order-edit"},{label:"staff",tooltip:"New Staff",icon:"account_circle",link:"staff-edit"},{label:"customers",tooltip:"New Customer",icon:"account_circle",link:"customer-edit"}],t.leftSideBar=[{link:"dashboard",title:"Dashboard",icon:"dashboard"},{link:"customers",title:"Customers",icon:"person_pin"},{link:"appraisals-list",title:"Appraisals",icon:"art_track"},{link:"showroom-view",title:"Showroom",icon:"room_service"},{link:"report-module",title:"reports",icon:"assessment"}],t.menu=[{link:"staff",title:"Staff",icon:"person_pin"},{link:"timesheet",title:"Timesheet",icon:"schedule"},{link:"no-work-log",title:"No work log",icon:"comment"},{link:"service-entries",title:"Service Entries",icon:"group_work"},{link:"commission-batch-sheets",title:"Commission Batch sheets",icon:"group_work"},{link:"commission-batch-sheet-entries",title:"Commission Batch sheet Entries",icon:"group_work"},{link:"commission-entries",title:"Commission Entries",icon:"group_work"},{link:"commission-runs",title:"Commission Run",icon:"group_work"},{link:"services",title:"Products and Services",icon:"group_work"},{link:"service-categories",title:"Products and Service Categories",icon:""}],t.user=[{link:"",linkFn:"loadStaff",title:"Profile",icon:""},{link:"",linkFn:"logoutCall",title:"Logout",icon:""}],t.settings=[{link:"",linkFn:"openSettings",title:"Global Settings",icon:""},{link:"accounting-system",title:"Accounting System",icon:""},{link:"service-uom",title:"UOM",icon:""},{link:"departments",title:"Departments",icon:""},{link:"positions",title:"Position",icon:""},{link:"workflow-stages",title:"Workflow Stages",icon:"group_work"},{link:"commission-schemes",title:"Commission Schemes",icon:"group_work"},{link:"select-app-mode-and-location",title:"App Mode",icon:"group_work"},{link:"tax-types",title:"Tax Type",icon:"group_work"},{link:"terms",title:"Terms",icon:"group_work"},{link:"discounts-list",title:"Discounts",icon:"group_work"},{link:"no-work-log",title:"No work log",icon:"comment"},{link:"lists-edit",title:"List Maintenance",icon:""},{link:"roles",title:"Roles",icon:""},{link:"zone-a",title:"Zone A",icon:""},{link:"zone-b",title:"Zone B",icon:""},{link:"lists-edit-showroom",title:"Showroom List Maintenance",icon:""}],t.checkLink=function(e){c.isObject(e)?c.isString(e.linkFn)?t[e.linkFn]():t.gotoState(e.link):a.serverError("Link is missing.")}}])}();